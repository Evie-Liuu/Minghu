import{_ as V,r as c,h as P,j as x,c as o,o as r,b as s,F as m,k as p,e as v,w as B,f as F,a as N,l as z,m as M,u as y,i as U,n as $,p as h,t as w}from"./index-zPOsnw8y.js";import{i as A}from"./Hemei_story-D1MM_gpy.js";const H="/Minghu/assets/cover-Bsdi9Mzn.png",E={class:"actions-wrapper page-background"},L={class:"cloud-container-left"},R=["src"],T={class:"cloud-container-right"},W=["src"],q={class:"relative z-5 pt-25 w-full shadow-md bg-header text-rice-500"},G={class:"container mx-auto flex items-center p-4"},J={class:"w-1/3"},K={class:"p-10 flex flex-col justify-center items-center gap-8 md:mx-auto"},O={class:"grid grid-cols-1 content-center md:grid-cols-3 gap-5 p-4 md:p-0 md:gap-5"},Q=["onClick"],X={class:"p-4 flex flex-col justify-center"},Y={class:"text-xl font-bold mb-2"},Z={class:"text-gray-600 text-sm"},ee={key:0,class:"text-center text-gray-500 mt-8"},f=6,te={__name:"Story",setup(se){const D=c([]),k=c([]);P(()=>{});const g=U("handleAppScroll"),b=c(A),l=c({sdgs:[],time:"all",startDate:"",endDate:""}),d=c(1),C=a=>{l.value=a,d.value=1},u=x(()=>{let a=b.value;if(l.value.sdgs.length>0&&(a=a.filter(e=>e.types&&e.types.some(i=>l.value.sdgs.includes(i)))),l.value.time!=="all"){const e=new Date;a=a.filter(i=>{if(!i.time||String(i.time).trim()==="")return!1;const t=new Date(Number(i.time)*1e3);if(l.value.time==="day"){const n=new Date;return n.setDate(e.getDate()-1),t>=n}else if(l.value.time==="week"){const n=new Date;return n.setDate(e.getDate()-7),t>=n}else if(l.value.time==="custom"&&l.value.startDate&&l.value.endDate){const n=new Date(l.value.startDate);n.setHours(0,0,0,0);const _=new Date(l.value.endDate);return _.setHours(23,59,59,999),t>=n&&t<=_}return!0})}return a}),I=x(()=>{const a=(d.value-1)*f,e=a+f;return u.value.slice(a,e)}),S=$(),j=a=>{S.push({name:"story-detail",params:{id:a}})};return(a,e)=>{const i=F("router-link");return r(),o("div",E,[s("div",L,[(r(!0),o(m,null,p(D.value,t=>(r(),o("img",{key:t.id,src:t.src,style:h(t.style),alt:"Decorative Cloud"},null,12,R))),128))]),s("div",T,[(r(!0),o(m,null,p(k.value,t=>(r(),o("img",{key:t.id,src:t.src,style:h(t.style),alt:"Decorative Cloud"},null,12,W))),128))]),s("div",{class:"content-scroller",onScroll:e[1]||(e[1]=(...t)=>y(g)&&y(g)(...t))},[s("header",q,[s("div",G,[s("div",J,[v(i,{to:"/sdgs",class:"back-home-btn"},{default:B(()=>[...e[2]||(e[2]=[s("span",{class:"text"},"回上頁",-1),s("span",{class:"icon"},"←",-1)])]),_:1})]),e[3]||(e[3]=s("div",{class:"w-1/3 text-center"},[s("h1",{class:"text-2xl md:text-3xl font-bold"},"故事牆")],-1)),e[4]||(e[4]=s("div",{class:"w-1/3"},null,-1))])]),s("main",K,[v(z,{"onUpdate:filters":C,class:"flex flex-wrap justify-center items-center gap-4"}),s("section",O,[(r(!0),o(m,null,p(I.value,t=>(r(),o("div",{class:"animate-fade-in-up cursor-pointer md:mx-auto min-h-80 bg-white rounded-xl shadow-md overflow-hidden flex flex-col gap-5 hover:scale-105",key:t.id,onClick:n=>j(t.id)},[e[6]||(e[6]=s("img",{src:H,alt:"Card Image",class:"h-45 object-cover"},null,-1)),s("div",X,[s("h2",Y,w(t.title),1),s("p",Z,w(t.intro),1),e[5]||(e[5]=s("p",{class:"text-gray-600 text-sm text-right pe-3"},"更多",-1))])],8,Q))),128))]),u.value.length===0?(r(),o("div",ee,[...e[7]||(e[7]=[s("p",null,"找不到符合條件的故事。",-1)])])):N("",!0),v(M,{class:"flex justify-center items-center gap-4 mt-8",totalItems:u.value.length,itemsPerPage:f,modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=t=>d.value=t)},null,8,["totalItems","modelValue"])])],32)])}}},ne=V(te,[["__scopeId","data-v-44974774"]]);export{ne as default};
